# =====================================================
# CONFIGURACION DE PRODUCCION - Images API v0.0.1
# =====================================================
# =====================================================
# JPA / HIBERNATE
# =====================================================
# En produccion, solo validamos el esquema, nunca lo creamos ni actualizamos.
spring.jpa.hibernate.ddl-auto=validate
# Deshabilitar Open Session in View (mejora rendimiento, evita queries inesperadas)
spring.jpa.open-in-view=false
# =====================================================
# LOGGING
# =====================================================
logging.level.root=INFO
logging.level.com.greetingsapp.imagesapi=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.springframework.security=WARN
# Patron de log con timestamp
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
# =====================================================
# HIKARICP - POOL DE CONEXIONES BD
# =====================================================
# Maximo de conexiones (ajustado para Railway - tier gratuito tiene ~10 conexiones)
spring.datasource.hikari.maximum-pool-size=5
# Conexiones minimas mantenidas en el pool
spring.datasource.hikari.minimum-idle=2
# Timeout para obtener conexion (30 segundos)
spring.datasource.hikari.connection-timeout=30000
# Tiempo maximo que una conexion puede estar inactiva (10 minutos)
spring.datasource.hikari.idle-timeout=600000
# Tiempo maximo de vida de una conexion (30 minutos)
spring.datasource.hikari.max-lifetime=1800000
# Detectar conexiones no cerradas (1 minuto)
spring.datasource.hikari.leak-detection-threshold=60000
# =====================================================
# ACTUATOR - HEALTH CHECKS Y MONITOREO
# =====================================================
management.endpoints.web.exposure.include=health,info,metrics,circuitbreakers,ratelimiters,retries
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true
# Probes para Kubernetes/Railway/Docker
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true
# =====================================================
# CORS
# =====================================================
# Dominios permitidos (configurar via variable de entorno)
cors.allowed.origins=${CORS_ALLOWED_ORIGINS:*}
# =====================================================
# COMPRESION HTTP
# =====================================================
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/plain
server.compression.min-response-size=1024
# =====================================================
# TIMEOUTS
# =====================================================
spring.mvc.async.request-timeout=30000
server.tomcat.connection-timeout=20000
# =====================================================
# PUERTO (Compatible con Railway/Cloud)
# =====================================================
server.port=${PORT:8080}
# =====================================================
# SEGURIDAD
# =====================================================
# Nunca mostrar stacktraces a los usuarios
server.error.include-stacktrace=never
server.error.include-message=never
server.error.include-binding-errors=never
# =====================================================
# SWAGGER / OPENAPI
# =====================================================
# Habilitar Swagger en produccion (util para testing)
# Si deseas deshabilitarlo, cambia a false
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
# Ordenar endpoints alfabeticamente
springdoc.swagger-ui.operationsSorter=alpha
springdoc.swagger-ui.tagsSorter=alpha
