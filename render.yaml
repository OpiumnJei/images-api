# ===========================================
# RENDER.COM - Configuraci칩n de Despliegue
# ===========================================
# Documentaci칩n: https://render.com/docs/yaml-spec

services:
  - type: web
    name: images-api
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: .
    # Health check
    healthCheckPath: /actuator/health
    # Variables de entorno
    envVars:
      # Perfil de Spring Boot para Render
      - key: SPRING_PROFILES_ACTIVE
        value: render
      # Base de datos - TiDB Cloud (configurar manualmente en dashboard)
      - key: DATASOURCE_URL
        sync: false  # Se configura manualmente en el dashboard de Render
      - key: DATASOURCE_USERNAME
        sync: false
      - key: DATASOURCE_PASSWORD
        sync: false
      # JWT Secret (generar uno seguro)
      - key: API_SECURITY_TOKEN_SECRET
        generateValue: true  # Render genera un valor seguro autom치ticamente
      # CORS - Actualizar con tu dominio de frontend
      - key: CORS_ALLOWED_ORIGINS
        value: "*"
      # Optimizaci칩n de memoria para tier gratuito
      - key: JAVA_OPTS
        value: "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:+UseG1GC -XX:+UseStringDeduplication"
